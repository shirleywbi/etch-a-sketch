function Knob(i,t){this.gameWidth=i.gameWidth,this.gameHeight=i.gameHeight,this.diameter=80;let s=this.gameHeight-this.diameter;this.position="left"===t?{x:this.diameter,y:s}:{x:this.gameWidth-this.diameter,y:s},this.stop=function(){this.angle=0},this.draw=function(i){i.lineWidth=1,i.beginPath(),i.arc(this.position.x,this.position.y,this.diameter/2,0,2*Math.PI),i.fillStyle="white",i.fill(),i.closePath(),i.beginPath(),i.strokeStyle="lightgray";let t=0;for(;t<60;)i.moveTo(this.position.x,this.position.y),i.lineTo(this.position.x+this.diameter/2*Math.cos(2*Math.PI/60*t)*.99,this.position.y+this.diameter/2*Math.sin(2*Math.PI/60*t)*.99),t++,i.stroke();i.closePath(),i.beginPath(),i.arc(this.position.x,this.position.y,this.diameter/2*.8,0,2*Math.PI),i.fillStyle="white",i.fill(),i.closePath()}}function InputHandler(i){document.addEventListener("keydown",t=>{switch(t.key){case"z":case"KeyZ":case"ArrowLeft":i.moveLeft();break;case"x":case"KeyX":case"ArrowRight":i.moveRight();break;case".":case"Period":case"ArrowUp":i.moveUp();break;case"/":case"Slash":case"ArrowDown":i.moveDown()}}),document.addEventListener("keyup",t=>{switch(t.key){case"z":case"KeyZ":case"ArrowLeft":i.stop();break;case"x":case"KeyX":case"ArrowRight":i.stop();break;case".":case"Period":case"ArrowUp":i.stop();break;case"/":case"Slash":case"ArrowDown":i.stop()}})}function Line(i){this.gameWidth=i.gameWidth,this.gameHeight=i.gameHeight,this.game=i,this.position={x:200,y:500},this.maxSpeed={x:1,y:1},this.speed={x:0,y:0},this.size=1,this.drawX=new Array,this.drawY=new Array,this.addScreenPos=function(){this.drawX.push(this.position.x),this.drawY.push(this.position.y)},this.moveLeft=function(){this.speed.x=-this.maxSpeed.x},this.moveRight=function(){this.speed.x=this.maxSpeed.x},this.moveUp=function(){this.speed.y=-this.maxSpeed.y},this.moveDown=function(){this.speed.y=this.maxSpeed.y},this.stop=function(){this.speed.x=0,this.speed.y=0},this.clear=function(){this.drawX=[],this.drawY=[]},this.draw=function(i){i.strokeStyle="rgba(46, 49, 49, 1)",i.lineWidth=this.size;for(let t=0;t<this.drawX.length;t++)i.beginPath(),i.moveTo(this.drawX[t-1],this.drawY[t-1]),i.lineTo(this.drawX[t],this.drawY[t]),i.closePath(),i.stroke();this.addScreenPos()},this.update=function(i){this.position.x+=this.speed.x,this.position.y+=this.speed.y;let t=this.game.screen;this.position.x<t.position.x?this.position.x=t.position.x:this.position.x+this.size>t.position.x+t.width&&(this.position.x=t.position.x+t.width-this.size),this.position.y-this.size<t.position.y?this.position.y=t.position.y:this.position.y+this.size>t.position.y+t.height&&(this.position.y=t.position.y+t.height-this.size)}}function Arrow(i,t){this.game=i,this.gameWidth=i.gameWidth,this.gameHeight=i.gameHeight,this.direction=t,this.size=15,this.space=5;let s=this.game.lknob.position.y-this.game.lknob.diameter/2-this.size-10,e=this.game.rknob.position.x-this.size/2;switch(t){case"left":this.position={x:this.game.lknob.position.x-(2*this.size+this.space)/2,y:s};break;case"right":this.position={x:this.game.arrowLeft.position.x+this.size+this.space,y:s};break;case"up":this.position={x:e,y:this.game.rknob.position.y-this.game.rknob.diameter/2-2*this.size-this.space-10};break;case"down":this.position={x:e,y:this.game.rknob.position.y-this.game.rknob.diameter/2-this.size-10}}this.draw=function(i){switch(i.fillStyle="black",this.direction){case"left":i.beginPath(),i.moveTo(this.position.x,this.position.y+this.size/2),i.lineTo(this.position.x+this.size,this.position.y+this.size),i.lineTo(this.position.x+this.size,this.position.y),i.fill(),i.closePath();break;case"right":i.beginPath(),i.moveTo(this.position.x,this.position.y),i.lineTo(this.position.x+this.size,this.position.y+this.size/2),i.lineTo(this.position.x,this.position.y+this.size),i.fill(),i.closePath();break;case"up":i.beginPath(),i.moveTo(this.position.x,this.position.y+this.size),i.lineTo(this.position.x+this.size/2,this.position.y),i.lineTo(this.position.x+this.size,this.position.y+this.size),i.fill(),i.closePath();break;case"down":i.beginPath(),i.moveTo(this.position.x,this.position.y),i.lineTo(this.position.x+this.size/2,this.position.y+this.size),i.lineTo(this.position.x+this.size,this.position.y),i.fill(),i.closePath()}}}function Screen(i){this.game=i,this.position={x:this.game.lknob.position.x/2,y:this.game.lknob.diameter/2},this.width=i.gameWidth-i.rknob.diameter,this.height=i.arrowUp.position.y-.5*i.rknob.diameter-20,this.draw=function(i){i.fillStyle="lightgray",i.strokeStyle="lightgray";i.lineJoin="round",i.lineWidth=20,i.strokeRect(this.position.x+10,this.position.y+10,this.width-20,this.height-20),i.fillRect(this.position.x+10,this.position.y+10,this.width-20,this.height-20)}}function Game(i,t){this.gameWidth=i,this.gameHeight=t,this.start=function(){this.lknob=new Knob(this,"left"),this.rknob=new Knob(this,"right"),this.line=new Line(this),this.arrowLeft=new Arrow(this,"left"),this.arrowRight=new Arrow(this,"right"),this.arrowUp=new Arrow(this,"up"),this.arrowDown=new Arrow(this,"down"),this.screen=new Screen(this),this.staticObjects=[this.lknob,this.rknob,this.arrowLeft,this.arrowRight,this.arrowUp,this.arrowDown,this.screen],this.gameObjects=[this.line],new InputHandler(this.line)},this.update=function(i){this.gameObjects.forEach(t=>t.update(i))},this.resetScreen=function(i){i.clearRect(this.screen.position.x,this.screen.position.y,this.screen.width,this.screen.height),this.line.clear(),this.screen.draw(i),document.getElementById("shake").play()},this.drawStatic=function(i){this.staticObjects.forEach(t=>t.draw(i))},this.draw=function(i){this.gameObjects.forEach(t=>t.draw(i))}}let canvas=document.getElementById("gameScreen"),context=canvas.getContext("2d");const GAME_WIDTH=800,GAME_HEIGHT=600;let game=new Game(800,600);game.start(),game.drawStatic(context),document.addEventListener("dblclick",i=>{game.resetScreen(context)});let lastTime=0;function gameLoop(i){let t=i-lastTime;lastTime=i,game.update(t),game.draw(context),requestAnimationFrame(gameLoop)}requestAnimationFrame(gameLoop);